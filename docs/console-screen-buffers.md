---
title: 主控台畫面緩衝區
description: 螢幕緩衝區是在主控台視窗中輸出之字元和色彩資料的二維陣列。
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: 主控台, 字元模式應用程式, 命令列應用程式, 終端機應用程式, 主控台 api
MS-HAID:
- '\_win32\_console\_screen\_buffers'
- base.console\_screen\_buffers
- consoles.console\_screen\_buffers
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: f94995fc-5f5f-4fcd-969d-7e10020634c2
ms.openlocfilehash: c3121a53f654bd2fa85fa140c2efc6d6217b7796
ms.sourcegitcommit: 463975e71920908a6bff9a6a7291ddf3736652d5
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/30/2020
ms.locfileid: "93039166"
---
# <a name="console-screen-buffers"></a><span data-ttu-id="f3caf-104">主控台畫面緩衝區</span><span class="sxs-lookup"><span data-stu-id="f3caf-104">Console Screen Buffers</span></span>

<span data-ttu-id="f3caf-105">*螢幕緩衝區* 是在主控台視窗中輸出之字元和色彩資料的二維陣列。</span><span class="sxs-lookup"><span data-stu-id="f3caf-105">A *screen buffer* is a two-dimensional array of character and color data for output in a console window.</span></span> <span data-ttu-id="f3caf-106">主控台可以有多個螢幕緩衝區。</span><span class="sxs-lookup"><span data-stu-id="f3caf-106">A console can have multiple screen buffers.</span></span> <span data-ttu-id="f3caf-107">*活動畫面緩衝區* 是顯示在畫面上的緩衝區。</span><span class="sxs-lookup"><span data-stu-id="f3caf-107">The *active screen buffer* is the one that is displayed on the screen.</span></span>

<span data-ttu-id="f3caf-108">當系統建立新的主控台時，系統會建立一個螢幕緩衝區。</span><span class="sxs-lookup"><span data-stu-id="f3caf-108">The system creates a screen buffer whenever it creates a new console.</span></span> <span data-ttu-id="f3caf-109">若要開啟主控台的主動螢幕緩衝區的控制碼，請在 [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858)函數的呼叫中指定 **CONOUT $** 值。</span><span class="sxs-lookup"><span data-stu-id="f3caf-109">To open a handle to a console's active screen buffer, specify the **CONOUT$** value in a call to the [**CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858) function.</span></span> <span data-ttu-id="f3caf-110">進程可以使用 [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) 函式來建立其主控台的其他螢幕緩衝區。</span><span class="sxs-lookup"><span data-stu-id="f3caf-110">A process can use the [**CreateConsoleScreenBuffer**](createconsolescreenbuffer.md) function to create additional screen buffers for its console.</span></span> <span data-ttu-id="f3caf-111">新的螢幕緩衝區在 [**SetConsoleActiveScreenBuffer**](setconsoleactivescreenbuffer.md) 函式的呼叫中指定其控制碼之前，不會處於使用中狀態。</span><span class="sxs-lookup"><span data-stu-id="f3caf-111">A new screen buffer is not active until its handle is specified in a call to the [**SetConsoleActiveScreenBuffer**](setconsoleactivescreenbuffer.md) function.</span></span> <span data-ttu-id="f3caf-112">不過，您可以存取螢幕緩衝區以讀取和寫入它們是否為作用中或非使用中狀態。</span><span class="sxs-lookup"><span data-stu-id="f3caf-112">However, screen buffers can be accessed for reading and writing whether they are active or inactive.</span></span>

<span data-ttu-id="f3caf-113">每個螢幕緩衝區都有自己的二維字元資訊記錄陣列。</span><span class="sxs-lookup"><span data-stu-id="f3caf-113">Each screen buffer has its own two-dimensional array of character information records.</span></span> <span data-ttu-id="f3caf-114">每個字元的資料會儲存在 [**CHAR \_ 資訊**](char-info-str.md) 結構中，指定 Unicode 或 ANSI 字元，以及顯示該字元的前景和背景色彩。</span><span class="sxs-lookup"><span data-stu-id="f3caf-114">The data for each character is stored in a [**CHAR\_INFO**](char-info-str.md) structure that specifies the Unicode or ANSI character and the foreground and background colors in which that character is displayed.</span></span>

<span data-ttu-id="f3caf-115">您可以針對每個螢幕緩衝區個別設定與螢幕緩衝區相關聯的數個屬性。</span><span class="sxs-lookup"><span data-stu-id="f3caf-115">A number of properties associated with a screen buffer can be set independently for each screen buffer.</span></span> <span data-ttu-id="f3caf-116">這表示變更主動螢幕緩衝區可能會對主控台視窗的外觀造成顯著的影響。</span><span class="sxs-lookup"><span data-stu-id="f3caf-116">This means that changing the active screen buffer can have a dramatic effect on the appearance of the console window.</span></span> <span data-ttu-id="f3caf-117">與螢幕緩衝區相關聯的屬性包括：</span><span class="sxs-lookup"><span data-stu-id="f3caf-117">The properties associated with a screen buffer include:</span></span>

- <span data-ttu-id="f3caf-118">螢幕緩衝區大小，以字元的資料列和資料行。</span><span class="sxs-lookup"><span data-stu-id="f3caf-118">Screen buffer size, in character rows and columns.</span></span>
- <span data-ttu-id="f3caf-119">Text 屬性 (前景和背景色彩，以顯示 [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) 或 [**WriteConsole**](writeconsole.md) 函式) 所要寫入的文字。</span><span class="sxs-lookup"><span data-stu-id="f3caf-119">Text attributes (foreground and background colors for displaying text to be written by the [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) or [**WriteConsole**](writeconsole.md) function).</span></span>
- <span data-ttu-id="f3caf-120">[視窗大小] 和 [位置] (顯示在主控台視窗) 的主控台螢幕緩衝區的矩形區域。</span><span class="sxs-lookup"><span data-stu-id="f3caf-120">Window size and location (the rectangular region of the console screen buffer that is displayed in the console window).</span></span>
- <span data-ttu-id="f3caf-121">游標位置、外觀和可見度。</span><span class="sxs-lookup"><span data-stu-id="f3caf-121">Cursor position, appearance, and visibility.</span></span>
- <span data-ttu-id="f3caf-122">輸出模式 ( **啟用 \_ 處理的 \_ 輸出** ，並 **\_ \_ 在 \_ EOL \_ 輸出) 啟用包裝** 。</span><span class="sxs-lookup"><span data-stu-id="f3caf-122">Output modes ( **ENABLE\_PROCESSED\_OUTPUT** and **ENABLE\_WRAP\_AT\_EOL\_OUTPUT** ).</span></span> <span data-ttu-id="f3caf-123">如需主控台輸出模式的詳細資訊，請參閱 [高階主控台模式](high-level-console-modes.md)。</span><span class="sxs-lookup"><span data-stu-id="f3caf-123">For more information about console output modes, see [High-Level Console Modes](high-level-console-modes.md).</span></span>

<span data-ttu-id="f3caf-124">建立螢幕緩衝區時，它會在每個位置包含空白字元。</span><span class="sxs-lookup"><span data-stu-id="f3caf-124">When a screen buffer is created, it contains space characters in every position.</span></span> <span data-ttu-id="f3caf-125">它的資料指標是可見的，位於緩衝區的原點 (0，0) ，而視窗的位置是在緩衝區原點的左上角。</span><span class="sxs-lookup"><span data-stu-id="f3caf-125">Its cursor is visible and positioned at the buffer's origin (0,0), and the window is positioned with its upper left corner at the buffer's origin.</span></span> <span data-ttu-id="f3caf-126">主控台螢幕緩衝區的大小、視窗大小、文字屬性，以及游標的外觀是由使用者或系統預設值所決定。</span><span class="sxs-lookup"><span data-stu-id="f3caf-126">The size of the console screen buffer, the window size, the text attributes, and the appearance of the cursor are determined by the user or by the system defaults.</span></span> <span data-ttu-id="f3caf-127">若要取得與主控台螢幕緩衝區相關聯之各種屬性的目前值，請使用 [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md)、 [**GetConsoleCursorInfo**](getconsolecursorinfo.md)和 [**GetConsoleMode**](getconsolemode.md) 函式。</span><span class="sxs-lookup"><span data-stu-id="f3caf-127">To retrieve the current values of the various properties associated with the console screen buffer, use the [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md), [**GetConsoleCursorInfo**](getconsolecursorinfo.md), and [**GetConsoleMode**](getconsolemode.md) functions.</span></span>

<span data-ttu-id="f3caf-128">變更任何主控台螢幕緩衝區內容的應用程式，應該建立自己的螢幕緩衝區，或在啟動期間儲存繼承的螢幕緩衝區狀態，並在結束時將其還原。</span><span class="sxs-lookup"><span data-stu-id="f3caf-128">Applications that change any of the console screen buffer properties should either create their own screen buffer or save the state of the inherited screen buffer during startup and restore it at exit.</span></span> <span data-ttu-id="f3caf-129">需要此合作行為，以確保共用相同主控台會話的其他應用程式不受變更影響。</span><span class="sxs-lookup"><span data-stu-id="f3caf-129">This cooperative behavior is required to ensure that other applications sharing the same console session are not impacted by the changes.</span></span>

> [!TIP]
> <span data-ttu-id="f3caf-130">建議您盡可能使用替代的 [**緩衝區模式**](console-virtual-terminal-sequences.md#alternate-screen-buffer) ，而不是針對此用途建立第二個螢幕緩衝區。</span><span class="sxs-lookup"><span data-stu-id="f3caf-130">It is recommended to use the [**alternate buffer mode**](console-virtual-terminal-sequences.md#alternate-screen-buffer) going forward, if possible, instead of creating a second screen buffer for this purpose.</span></span> <span data-ttu-id="f3caf-131">**替代緩衝區模式** 提供遠端裝置與其他平臺之間的增強相容性。</span><span class="sxs-lookup"><span data-stu-id="f3caf-131">**Alternate buffer mode** offers increased compatibility across remote devices and with other platforms.</span></span> <span data-ttu-id="f3caf-132">如需詳細資訊，請參閱 [**傳統主控台 api 與虛擬終端**](classic-vs-vt.md) 機的討論。</span><span class="sxs-lookup"><span data-stu-id="f3caf-132">Please see our discussion on [**classic console APIs versus virtual terminal**](classic-vs-vt.md) for more information.</span></span>

## <a name="cursor-appearance-and-position"></a><span data-ttu-id="f3caf-133">游標外觀和位置</span><span class="sxs-lookup"><span data-stu-id="f3caf-133">Cursor Appearance and Position</span></span>

<span data-ttu-id="f3caf-134">螢幕緩衝區的游標可以是可見或隱藏的。</span><span class="sxs-lookup"><span data-stu-id="f3caf-134">A screen buffer's cursor can be visible or hidden.</span></span> <span data-ttu-id="f3caf-135">當它顯示時，其外觀可能會有所不同，範圍從完全填滿字元儲存格到顯示為數據格底部的水平線條。</span><span class="sxs-lookup"><span data-stu-id="f3caf-135">When it is visible, its appearance can vary, ranging from completely filling a character cell to appearing as a horizontal line at the bottom of the cell.</span></span> <span data-ttu-id="f3caf-136">若要取得資料指標外觀和可見度的相關資訊，請使用 [**GetConsoleCursorInfo**](getconsolecursorinfo.md) 函數。</span><span class="sxs-lookup"><span data-stu-id="f3caf-136">To retrieve information about the appearance and visibility of the cursor, use the [**GetConsoleCursorInfo**](getconsolecursorinfo.md) function.</span></span> <span data-ttu-id="f3caf-137">此函數會報告資料指標是否可見，並將資料指標的外觀描述為它所填滿的字元資料格的百分比。</span><span class="sxs-lookup"><span data-stu-id="f3caf-137">This function reports whether the cursor is visible and describes the appearance of the cursor as the percentage of a character cell that it fills.</span></span> <span data-ttu-id="f3caf-138">若要設定資料指標的外觀和可見度，請使用 [**SetConsoleCursorInfo**](setconsolecursorinfo.md) 函數。</span><span class="sxs-lookup"><span data-stu-id="f3caf-138">To set the appearance and visibility of the cursor, use the [**SetConsoleCursorInfo**](setconsolecursorinfo.md) function.</span></span>

<span data-ttu-id="f3caf-139">[高層級主控台 i/o](high-level-console-i-o.md)函式所寫入的字元會寫入目前的游標位置，然後將游標移到下一個位置。</span><span class="sxs-lookup"><span data-stu-id="f3caf-139">Characters written by the [high-level console I/O functions](high-level-console-i-o.md) are written at the current cursor location, advancing the cursor to the next location.</span></span> <span data-ttu-id="f3caf-140">若要判斷螢幕緩衝區座標系統中目前的資料指標位置，請使用 [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md)。</span><span class="sxs-lookup"><span data-stu-id="f3caf-140">To determine the current cursor position in the coordinate system of a screen buffer, use [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md).</span></span> <span data-ttu-id="f3caf-141">您可以使用 [**SetConsoleCursorPosition**](setconsolecursorposition.md) 來設定游標位置，進而控制高階 i/o 函式所寫入或送出之文字的位置。</span><span class="sxs-lookup"><span data-stu-id="f3caf-141">You can use [**SetConsoleCursorPosition**](setconsolecursorposition.md) to set the cursor position and, thereby, control the placement of text that is written or echoed by the high-level I/O functions.</span></span> <span data-ttu-id="f3caf-142">如果您移動游標，則會覆寫新游標位置的文字。</span><span class="sxs-lookup"><span data-stu-id="f3caf-142">If you move the cursor, text at the new cursor location is overwritten.</span></span>

> [!NOTE]
> <span data-ttu-id="f3caf-143">不建議使用低層級的函式來尋找游標位置。</span><span class="sxs-lookup"><span data-stu-id="f3caf-143">Using the low-level functions to find the cursor position is discouraged.</span></span> <span data-ttu-id="f3caf-144">如果需要進行先進的版面配置，建議使用 [虛擬終端機序列](console-virtual-terminal-sequences.md) 來查詢此位置。</span><span class="sxs-lookup"><span data-stu-id="f3caf-144">It is recommended to use [virtual terminal sequences](console-virtual-terminal-sequences.md) to query this position if necessary for advanced layouts.</span></span> <span data-ttu-id="f3caf-145">如需有關偏好虛擬終端機序列的詳細資訊，請參閱 **[傳統功能與虛擬終端](classic-vs-vt.md)** 檔。</span><span class="sxs-lookup"><span data-stu-id="f3caf-145">More information about preferring virtual terminal sequences can be found in the **[classic functions versus virtual terminal](classic-vs-vt.md)** document.</span></span>

<span data-ttu-id="f3caf-146">資料指標的位置、外觀和可見度是針對每個螢幕緩衝區個別設定。</span><span class="sxs-lookup"><span data-stu-id="f3caf-146">The position, appearance, and visibility of the cursor are set independently for each screen buffer.</span></span>

## <a name="character-attributes"></a><span data-ttu-id="f3caf-147">字元屬性</span><span class="sxs-lookup"><span data-stu-id="f3caf-147">Character Attributes</span></span>

<span data-ttu-id="f3caf-148">字元屬性可以分為兩個類別： color 和 DBCS。</span><span class="sxs-lookup"><span data-stu-id="f3caf-148">Character attributes can be divided into two classes: color and DBCS.</span></span> <span data-ttu-id="f3caf-149">下列屬性定義于 `WinCon.h` 標頭檔中。</span><span class="sxs-lookup"><span data-stu-id="f3caf-149">The following attributes are defined in the `WinCon.h` header file.</span></span>

| <span data-ttu-id="f3caf-150">屬性</span><span class="sxs-lookup"><span data-stu-id="f3caf-150">Attribute</span></span> | <span data-ttu-id="f3caf-151">意義</span><span class="sxs-lookup"><span data-stu-id="f3caf-151">Meaning</span></span> |
|-|-|
| <span data-ttu-id="f3caf-152">**前景 \_ 藍色**</span><span class="sxs-lookup"><span data-stu-id="f3caf-152">**FOREGROUND\_BLUE**</span></span> | <span data-ttu-id="f3caf-153">文字色彩包含藍色。</span><span class="sxs-lookup"><span data-stu-id="f3caf-153">Text color contains blue.</span></span> |
| <span data-ttu-id="f3caf-154">**前景 \_ 綠色**</span><span class="sxs-lookup"><span data-stu-id="f3caf-154">**FOREGROUND\_GREEN**</span></span> | <span data-ttu-id="f3caf-155">文字色彩包含綠色。</span><span class="sxs-lookup"><span data-stu-id="f3caf-155">Text color contains green.</span></span> |
| <span data-ttu-id="f3caf-156">**前景 \_ 紅色**</span><span class="sxs-lookup"><span data-stu-id="f3caf-156">**FOREGROUND\_RED**</span></span> | <span data-ttu-id="f3caf-157">文字色彩包含紅色。</span><span class="sxs-lookup"><span data-stu-id="f3caf-157">Text color contains red.</span></span> |
| <span data-ttu-id="f3caf-158">**前景 \_ 濃度**</span><span class="sxs-lookup"><span data-stu-id="f3caf-158">**FOREGROUND\_INTENSITY**</span></span> | <span data-ttu-id="f3caf-159">文字色彩為更。</span><span class="sxs-lookup"><span data-stu-id="f3caf-159">Text color is intensified.</span></span> |
| <span data-ttu-id="f3caf-160">**背景 \_ 藍色**</span><span class="sxs-lookup"><span data-stu-id="f3caf-160">**BACKGROUND\_BLUE**</span></span> | <span data-ttu-id="f3caf-161">背景色彩包含藍色。</span><span class="sxs-lookup"><span data-stu-id="f3caf-161">Background color contains blue.</span></span> |
| <span data-ttu-id="f3caf-162">**背景 \_ 綠色**</span><span class="sxs-lookup"><span data-stu-id="f3caf-162">**BACKGROUND\_GREEN**</span></span> | <span data-ttu-id="f3caf-163">背景色彩包含綠色。</span><span class="sxs-lookup"><span data-stu-id="f3caf-163">Background color contains green.</span></span> |
| <span data-ttu-id="f3caf-164">**背景 \_ 紅色**</span><span class="sxs-lookup"><span data-stu-id="f3caf-164">**BACKGROUND\_RED**</span></span> | <span data-ttu-id="f3caf-165">背景色彩包含紅色。</span><span class="sxs-lookup"><span data-stu-id="f3caf-165">Background color contains red.</span></span> |
| <span data-ttu-id="f3caf-166">**背景 \_ 濃度**</span><span class="sxs-lookup"><span data-stu-id="f3caf-166">**BACKGROUND\_INTENSITY**</span></span> | <span data-ttu-id="f3caf-167">背景色彩為更。</span><span class="sxs-lookup"><span data-stu-id="f3caf-167">Background color is intensified.</span></span> |
| <span data-ttu-id="f3caf-168">**常見的 \_ LVB \_ 前置 \_ 位元組**</span><span class="sxs-lookup"><span data-stu-id="f3caf-168">**COMMON\_LVB\_LEADING\_BYTE**</span></span> | <span data-ttu-id="f3caf-169">前置位元組。</span><span class="sxs-lookup"><span data-stu-id="f3caf-169">Leading byte.</span></span> |
| <span data-ttu-id="f3caf-170">**一般 \_ LVB \_ 尾端 \_ 位元組**</span><span class="sxs-lookup"><span data-stu-id="f3caf-170">**COMMON\_LVB\_TRAILING\_BYTE**</span></span> | <span data-ttu-id="f3caf-171">尾端位元組。</span><span class="sxs-lookup"><span data-stu-id="f3caf-171">Trailing byte.</span></span> |
| <span data-ttu-id="f3caf-172">**一般 \_ LVB \_ 方格 \_ 水準**</span><span class="sxs-lookup"><span data-stu-id="f3caf-172">**COMMON\_LVB\_GRID\_HORIZONTAL**</span></span> | <span data-ttu-id="f3caf-173">上水準。</span><span class="sxs-lookup"><span data-stu-id="f3caf-173">Top horizontal.</span></span> |
| <span data-ttu-id="f3caf-174">**一般 \_ LVB \_ 方格 \_ LVERTICAL**</span><span class="sxs-lookup"><span data-stu-id="f3caf-174">**COMMON\_LVB\_GRID\_LVERTICAL**</span></span> | <span data-ttu-id="f3caf-175">左方垂直。</span><span class="sxs-lookup"><span data-stu-id="f3caf-175">Left vertical.</span></span> |
| <span data-ttu-id="f3caf-176">**一般 \_ LVB \_ 方格 \_ RVERTICAL**</span><span class="sxs-lookup"><span data-stu-id="f3caf-176">**COMMON\_LVB\_GRID\_RVERTICAL**</span></span> | <span data-ttu-id="f3caf-177">右垂直。</span><span class="sxs-lookup"><span data-stu-id="f3caf-177">Right vertical.</span></span> |
| <span data-ttu-id="f3caf-178">**一般 \_ LVB \_ 反轉 \_ 影片**</span><span class="sxs-lookup"><span data-stu-id="f3caf-178">**COMMON\_LVB\_REVERSE\_VIDEO**</span></span> | <span data-ttu-id="f3caf-179">反向前景和背景屬性。</span><span class="sxs-lookup"><span data-stu-id="f3caf-179">Reverse foreground and background attributes.</span></span> |
| <span data-ttu-id="f3caf-180">**一般 \_ LVB \_ 底線**</span><span class="sxs-lookup"><span data-stu-id="f3caf-180">**COMMON\_LVB\_UNDERSCORE**</span></span> | <span data-ttu-id="f3caf-181">強調。</span><span class="sxs-lookup"><span data-stu-id="f3caf-181">Underscore.</span></span> |

<span data-ttu-id="f3caf-182">前景屬性會指定文字色彩。</span><span class="sxs-lookup"><span data-stu-id="f3caf-182">The foreground attributes specify the text color.</span></span> <span data-ttu-id="f3caf-183">背景屬性會指定用來填滿儲存格背景的色彩。</span><span class="sxs-lookup"><span data-stu-id="f3caf-183">The background attributes specify the color used to fill the cell's background.</span></span> <span data-ttu-id="f3caf-184">其他屬性則與 [DBCS](https://msdn.microsoft.com/library/windows/desktop/dd317794)一起使用。</span><span class="sxs-lookup"><span data-stu-id="f3caf-184">The other attributes are used with [DBCS](https://msdn.microsoft.com/library/windows/desktop/dd317794).</span></span>

<span data-ttu-id="f3caf-185">應用程式可以結合前景和背景常數來達成不同的色彩。</span><span class="sxs-lookup"><span data-stu-id="f3caf-185">An application can combine the foreground and background constants to achieve different colors.</span></span> <span data-ttu-id="f3caf-186">例如，下列組合會產生藍色背景的亮青文字。</span><span class="sxs-lookup"><span data-stu-id="f3caf-186">For example, the following combination results in bright cyan text on a blue background.</span></span>

`FOREGROUND_BLUE | FOREGROUND_GREEN | FOREGROUND_INTENSITY | BACKGROUND_BLUE`

<span data-ttu-id="f3caf-187">如果未指定背景常數，則背景為黑色，而且如果未指定前景常數，則文字為黑色。</span><span class="sxs-lookup"><span data-stu-id="f3caf-187">If no background constant is specified, the background is black, and if no foreground constant is specified, the text is black.</span></span> <span data-ttu-id="f3caf-188">例如，下列組合會在白色背景上產生黑色文字。</span><span class="sxs-lookup"><span data-stu-id="f3caf-188">For example, the following combination produces black text on a white background.</span></span>

`BACKGROUND_BLUE | BACKGROUND_GREEN | BACKGROUND_RED`

<span data-ttu-id="f3caf-189">每個螢幕緩衝區字元資料格都會儲存用來繪製前景 (文字) 和該儲存格背景的色彩屬性。</span><span class="sxs-lookup"><span data-stu-id="f3caf-189">Each screen buffer character cell stores the color attributes for the colors used in drawing the foreground (text) and background of that cell.</span></span> <span data-ttu-id="f3caf-190">應用程式可以個別設定每個字元資料格的色彩資料，並將資料儲存在每個資料格之 [**CHAR \_ 資訊**](char-info-str.md)結構的 **屬性** 成員中。</span><span class="sxs-lookup"><span data-stu-id="f3caf-190">An application can set the color data for each character cell individually, storing the data in the **Attributes** member of the [**CHAR\_INFO**](char-info-str.md) structure for each cell.</span></span> <span data-ttu-id="f3caf-191">每個螢幕緩衝區目前的 text 屬性會用於高階函式所寫入或回顯的字元。</span><span class="sxs-lookup"><span data-stu-id="f3caf-191">The current text attributes of each screen buffer are used for characters subsequently written or echoed by the high-level functions.</span></span>

<span data-ttu-id="f3caf-192">應用程式可以使用 [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) 來判斷螢幕緩衝區目前的 text 屬性，以及使用 [**SetConsoleTextAttribute**](setconsoletextattribute.md) 函數來設定字元屬性。</span><span class="sxs-lookup"><span data-stu-id="f3caf-192">An application can use [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) to determine the current text attributes of a screen buffer and the [**SetConsoleTextAttribute**](setconsoletextattribute.md) function to set the character attributes.</span></span> <span data-ttu-id="f3caf-193">變更螢幕緩衝區的屬性不會影響先前撰寫的字元顯示。</span><span class="sxs-lookup"><span data-stu-id="f3caf-193">Changing a screen buffer's attributes does not affect the display of characters previously written.</span></span> <span data-ttu-id="f3caf-194">這些文字屬性不會影響低層級主控台 i/o 函式所寫入的字元 (例如 [**WriteConsoleOutput**](writeconsoleoutput.md) 或 [**WriteConsoleOutputCharacter**](writeconsoleoutputcharacter.md) 函式) ，可針對每個寫入或保留屬性的資料格明確指定屬性。</span><span class="sxs-lookup"><span data-stu-id="f3caf-194">These text attributes do not affect characters written by the low-level console I/O functions (such as the [**WriteConsoleOutput**](writeconsoleoutput.md) or [**WriteConsoleOutputCharacter**](writeconsoleoutputcharacter.md) function), which either explicitly specify the attributes for each cell that is written or leave the attributes unchanged.</span></span>

> [!NOTE]
> <span data-ttu-id="f3caf-195">不建議使用低層級的函式來操作預設和特定的文字屬性。</span><span class="sxs-lookup"><span data-stu-id="f3caf-195">Using the low-level functions to manipulate default and specific text attributes is discouraged.</span></span> <span data-ttu-id="f3caf-196">建議使用 [虛擬終端順序](console-virtual-terminal-sequences.md) 來設定文字屬性。</span><span class="sxs-lookup"><span data-stu-id="f3caf-196">It is recommended to use [virtual terminal sequences](console-virtual-terminal-sequences.md) to set text attributes.</span></span> <span data-ttu-id="f3caf-197">如需有關偏好虛擬終端機序列的詳細資訊，請參閱 **[傳統功能與虛擬終端](classic-vs-vt.md)** 檔。</span><span class="sxs-lookup"><span data-stu-id="f3caf-197">More information about preferring virtual terminal sequences can be found in the **[classic functions versus virtual terminal](classic-vs-vt.md)** document.</span></span>

## <a name="font-attributes"></a><span data-ttu-id="f3caf-198">字型屬性</span><span class="sxs-lookup"><span data-stu-id="f3caf-198">Font Attributes</span></span>

<span data-ttu-id="f3caf-199">[**GetCurrentConsoleFont**](getcurrentconsolefont.md)函式會捕獲目前主控台字型的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="f3caf-199">The [**GetCurrentConsoleFont**](getcurrentconsolefont.md) function retrieves information about the current console font.</span></span> <span data-ttu-id="f3caf-200">儲存在 [**主控台 \_ 字型 \_ 資訊**](console-font-info-str.md) 結構中的資訊包含字型中每個字元的寬度和高度。</span><span class="sxs-lookup"><span data-stu-id="f3caf-200">The information stored in the [**CONSOLE\_FONT\_INFO**](console-font-info-str.md) structure includes the width and height of each character in the font.</span></span>

<span data-ttu-id="f3caf-201">[**GetConsoleFontSize**](getconsolefontsize.md)函式會抓取指定的主控台螢幕緩衝區所使用的字型大小。</span><span class="sxs-lookup"><span data-stu-id="f3caf-201">The [**GetConsoleFontSize**](getconsolefontsize.md) function retrieves the size of the font used by the specified console screen buffer.</span></span>

> [!NOTE]
> <span data-ttu-id="f3caf-202">不建議使用函數來尋找和操作字型資訊。</span><span class="sxs-lookup"><span data-stu-id="f3caf-202">Using functions to find and manipulate font information is discouraged.</span></span> <span data-ttu-id="f3caf-203">建議您以字型中立的方式操作命令列應用程式，以確保跨平臺相容性，以及與允許使用者自訂字型的主機環境相容。</span><span class="sxs-lookup"><span data-stu-id="f3caf-203">It is recommended to operate command-line applications in a font neutral manner to ensure cross-platform compatibility as well as compatibility with host environments that allow the user to customize the font.</span></span> <span data-ttu-id="f3caf-204">如需使用者喜好設定和主機環境（包括終端機）的詳細資訊，請參閱 **[生態系統藍圖](ecosystem-roadmap.md)** 。</span><span class="sxs-lookup"><span data-stu-id="f3caf-204">More information user preferences and host environments including terminals, please see the **[ecosystem roadmap](ecosystem-roadmap.md)** .</span></span>
