---
title: Windows 主控台和終端生態系統藍圖
description: 提供 Windows 主控台主機、主控台 Api、主控台子系統和終端機產品之間與方案之間互動的高階觀點。
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: 主控台、終端機、虛擬終端機、主控台主機、命令列、子系統、藍圖、生態系統
ms.prod: console
ms.openlocfilehash: e47b72a6f66e54b5f2904770f7c1a87e08d927e2
ms.sourcegitcommit: 463975e71920908a6bff9a6a7291ddf3736652d5
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/30/2020
ms.locfileid: "93039587"
---
# <a name="windows-console-and-terminal-ecosystem-roadmap"></a><span data-ttu-id="1eacf-104">Windows 主控台和終端生態系統藍圖</span><span class="sxs-lookup"><span data-stu-id="1eacf-104">Windows Console and Terminal Ecosystem Roadmap</span></span>

<span data-ttu-id="1eacf-105">本檔是 Windows 主控台和 Windows 終端機產品的高階藍圖。</span><span class="sxs-lookup"><span data-stu-id="1eacf-105">This document is a high-level roadmap of the Windows Console and Windows Terminal products.</span></span> <span data-ttu-id="1eacf-106">它涵蓋：</span><span class="sxs-lookup"><span data-stu-id="1eacf-106">It covers:</span></span>


- <span data-ttu-id="1eacf-107">Windows 主控台和 Windows 終端機如何融入 Windows 和其他作業系統上的命令列應用程式生態系統。</span><span class="sxs-lookup"><span data-stu-id="1eacf-107">How Windows Console and Windows Terminal fit into the ecosystem of command-line applications across Windows and other operating systems.</span></span>

- <span data-ttu-id="1eacf-108">產品、功能和策略的歷程記錄和未來藍圖，這些都是建立平臺的一部分，也是針對此平臺建立。</span><span class="sxs-lookup"><span data-stu-id="1eacf-108">A history and future roadmap of the products, features, and strategies that are part of building the platform, as well as building for this platform.</span></span>

<span data-ttu-id="1eacf-109">Microsoft 目前的主控台/終端時代的重點，是要直接為 Windows 平臺上的開發人員提供頂級的終端機體驗，並[推出](classic-vs-vt.md)傳統的 Windows 主控台 api，使用[pseudoconsole](pseudoconsoles.md)取代[虛擬終端機序列](console-virtual-terminal-sequences.md)。</span><span class="sxs-lookup"><span data-stu-id="1eacf-109">The focus of the current console/terminal era at Microsoft is to bring a first-class terminal experience directly to developers on the Windows platform and to [phase out](classic-vs-vt.md) classic Windows Console APIs, replacing them with [virtual terminal sequences](console-virtual-terminal-sequences.md) utilizing [pseudoconsole](pseudoconsoles.md).</span></span> <span data-ttu-id="1eacf-110">**[Windows 終端機](/terminal/get-started)** 將這項轉換展示為頂級體驗、邀請開發人員群體中的 [開放原始](https://github.com/microsoft/terminal) 碼共同作業、支援完整的用戶端命令列和終端機裝載應用程式混合和比對，以及將 Windows 生態系統與所有其他平臺整合。</span><span class="sxs-lookup"><span data-stu-id="1eacf-110">**[Windows Terminal](/terminal/get-started)** showcases this transition into a first-class experience, inviting [open source collaboration](https://github.com/microsoft/terminal) from the developer community, supporting a full spectrum of mixing and matching of client command-line and terminal hosting applications, and unifying the Windows ecosystem with all other platforms.</span></span>

## <a name="definitions"></a><span data-ttu-id="1eacf-111">定義</span><span class="sxs-lookup"><span data-stu-id="1eacf-111">Definitions</span></span>

<span data-ttu-id="1eacf-112">建議您先熟悉此空間中所使用之常見術語的 [定義](definitions.md) ，再繼續進行。</span><span class="sxs-lookup"><span data-stu-id="1eacf-112">It is recommended to familiarize yourself with the [definitions](definitions.md) of common terminology used in this space before proceeding.</span></span> <span data-ttu-id="1eacf-113">常見術語包括： [命令列 (或主控台) 應用程式](definitions.md#command-line-applications)、 [標準處理 `STDIN` (`STDOUT` 、 `STDERR`) ](definitions.md#standard-handles)、 [TTY 和 PTY 裝置](definitions.md#ttypty)、 [用戶端和伺服器](definitions.md#clients-and-servers)、 [主控台子系統](definitions.md#console-subsystem)、 [主控台主機](definitions.md#console-host)、 [pseudoconsole](definitions.md#pseudoconsole)和 [終端](definitions.md#terminal)機。</span><span class="sxs-lookup"><span data-stu-id="1eacf-113">Common terminology includes: [Command Line (or Console) applications](definitions.md#command-line-applications), [standard handles (`STDIN`, `STDOUT`, `STDERR`)](definitions.md#standard-handles), [TTY and PTY devices](definitions.md#ttypty), [clients and servers](definitions.md#clients-and-servers), [console subsystem](definitions.md#console-subsystem), [console host](definitions.md#console-host), [pseudoconsole](definitions.md#pseudoconsole), and [terminal](definitions.md#terminal).</span></span>

## <a name="architecture"></a><span data-ttu-id="1eacf-114">架構</span><span class="sxs-lookup"><span data-stu-id="1eacf-114">Architecture</span></span>

<span data-ttu-id="1eacf-115">系統的一般架構分為四個部分：用戶端、裝置、伺服器和終端機。</span><span class="sxs-lookup"><span data-stu-id="1eacf-115">The general architecture of the system is in four parts: client, device, server, and terminal.</span></span>

![從用戶端到裝置到終端機的命令列通訊流程圖來源至目的地](images/command-line-communication.png)

### <a name="client"></a><span data-ttu-id="1eacf-117">用戶端</span><span class="sxs-lookup"><span data-stu-id="1eacf-117">Client</span></span>

<span data-ttu-id="1eacf-118">用戶端是一種命令列應用程式，它會使用以文字為基礎的介面，讓使用者 (輸入命令，而不是以滑鼠為基礎的使用者介面) ，傳回結果的文字標記法。</span><span class="sxs-lookup"><span data-stu-id="1eacf-118">The client is a command-line application that uses a text-based interface to enable the user to enter commands (rather than a mouse-based user interface), returning a text representation of the result.</span></span> <span data-ttu-id="1eacf-119">在 Windows 上，主控台 API 會提供用戶端與裝置之間的通訊層。</span><span class="sxs-lookup"><span data-stu-id="1eacf-119">On Windows, the Console API provides a communications layer between the client and the device.</span></span> <span data-ttu-id="1eacf-120"> (這也可以是具有裝置控制 Api) 的標準主控台控制碼。</span><span class="sxs-lookup"><span data-stu-id="1eacf-120">(This can also be a standard console handle with device control APIs).</span></span>

### <a name="device"></a><span data-ttu-id="1eacf-121">裝置</span><span class="sxs-lookup"><span data-stu-id="1eacf-121">Device</span></span>

<span data-ttu-id="1eacf-122">裝置是兩個進程、用戶端和伺服器之間的中繼訊息處理通訊層。</span><span class="sxs-lookup"><span data-stu-id="1eacf-122">The device is an intermediate message-handling communications layer between two processes, the client and the server.</span></span> <span data-ttu-id="1eacf-123">在 Windows 中，這是主控台驅動程式。</span><span class="sxs-lookup"><span data-stu-id="1eacf-123">On Windows, this is the console driver.</span></span> <span data-ttu-id="1eacf-124">在其他平臺上，它是 TTY 或 PTY 裝置。</span><span class="sxs-lookup"><span data-stu-id="1eacf-124">On other platforms, it is the TTY or PTY device.</span></span> <span data-ttu-id="1eacf-125">如果整個交易是純文字或包含 [虛擬終端順序](console-virtual-terminal-sequences.md)，而不是 [Windows 主控台 api](console-functions.md)，則可以使用其他裝置（如檔案、管道和通訊端）作為通道。</span><span class="sxs-lookup"><span data-stu-id="1eacf-125">Other devices like files, pipes, and sockets may be used as this communication channel if the entire transaction is in plain text or contains [virtual terminal sequences](console-virtual-terminal-sequences.md), but not with [Windows Console APIs](console-functions.md).</span></span>

### <a name="server"></a><span data-ttu-id="1eacf-126">伺服器</span><span class="sxs-lookup"><span data-stu-id="1eacf-126">Server</span></span>

<span data-ttu-id="1eacf-127">伺服器會從用戶端解釋要求的 API 呼叫或訊息。</span><span class="sxs-lookup"><span data-stu-id="1eacf-127">The server interprets the requested API calls or messages from the client.</span></span> <span data-ttu-id="1eacf-128">在處於傳統操作模式的 Windows 上，伺服器也會建立使用者介面，以便將輸出呈現到畫面。</span><span class="sxs-lookup"><span data-stu-id="1eacf-128">On Windows in the classic operating mode, the server also creates a user interface to present the output to the screen.</span></span> <span data-ttu-id="1eacf-129">伺服器會另外收集輸入，以便透過驅動程式將回應訊息傳回至用戶端，例如在相同模組中配套的終端機。</span><span class="sxs-lookup"><span data-stu-id="1eacf-129">The server additionally collects input to send back in response messages to the client, via the driver, like a terminal bundled in the same module.</span></span> <span data-ttu-id="1eacf-130">使用 [pseudoconsole](pseudoconsoles.md) 模式時，它會改為將 [虛擬終端機序列](console-virtual-terminal-sequences.md) 中的這項資訊呈現至附加的終端機。</span><span class="sxs-lookup"><span data-stu-id="1eacf-130">Using [pseudoconsole](pseudoconsoles.md) mode, it instead is only a translator to present this information in [virtual terminal sequences](console-virtual-terminal-sequences.md) to an attached terminal.</span></span>

### <a name="terminal"></a><span data-ttu-id="1eacf-131">終端</span><span class="sxs-lookup"><span data-stu-id="1eacf-131">Terminal</span></span>

<span data-ttu-id="1eacf-132">終端機是最後一層，為使用者提供圖形化顯示和互動服務。</span><span class="sxs-lookup"><span data-stu-id="1eacf-132">The terminal is the final layer providing graphical display and interactivity services to the user.</span></span> <span data-ttu-id="1eacf-133">它負責捕獲輸入，並將其編碼為 [虛擬終端機序列](console-virtual-terminal-sequences.md)，最後會到達用戶端 `STDIN` 。</span><span class="sxs-lookup"><span data-stu-id="1eacf-133">It is responsible for capturing input and encoding it as [virtual terminal sequences](console-virtual-terminal-sequences.md), which eventually reach the client's `STDIN`.</span></span> <span data-ttu-id="1eacf-134">它也會接收和解碼從用戶端在螢幕上呈現的 *虛擬終端* 機序列 `STDOUT` 。</span><span class="sxs-lookup"><span data-stu-id="1eacf-134">It will also receive and decode the *virtual terminal sequences* that it receives back from the client's `STDOUT` for presentation on the screen.</span></span>

#### <a name="further-connections"></a><span data-ttu-id="1eacf-135">進一步連接</span><span class="sxs-lookup"><span data-stu-id="1eacf-135">Further connections</span></span>

<span data-ttu-id="1eacf-136">作為補充項，可以藉由將服務多個角色的應用程式連結到其中一個端點，來執行進一步的連接。</span><span class="sxs-lookup"><span data-stu-id="1eacf-136">As an addendum, further connections can be performed by chaining applications that serve multiple roles into one of the endpoints.</span></span> <span data-ttu-id="1eacf-137">例如，SSH 會話有兩個角色：它是在一個裝置上執行的命令列應用程式的 **終端** 機，但它會將所有收到的資訊轉送到另一個裝置上的 **用戶端** 角色。</span><span class="sxs-lookup"><span data-stu-id="1eacf-137">For instance, an SSH session has two roles: it is a **terminal** for the command-line application running on one device, but it forwards all received information on to a **client** role on another device.</span></span> <span data-ttu-id="1eacf-138">此連結可以無限期地跨裝置和內容進行，以提供廣泛的案例彈性。</span><span class="sxs-lookup"><span data-stu-id="1eacf-138">This chaining can occur indefinitely across devices and contexts offering broad scenario flexibility.</span></span>

<span data-ttu-id="1eacf-139">在非 Windows 平臺上， **伺服器** 和 **終端** 機角色是單一單位，因為 API 集合與 [虛擬終端機序列](console-virtual-terminal-sequences.md)之間不需要轉譯相容性層。</span><span class="sxs-lookup"><span data-stu-id="1eacf-139">On non-Windows platforms, the **server** and **terminal** roles are a single unit because there is no need for a translation compatibility layer between an API set and [virtual terminal sequences](console-virtual-terminal-sequences.md).</span></span>

## <a name="microsoft-products"></a><span data-ttu-id="1eacf-140">Microsoft 產品</span><span class="sxs-lookup"><span data-stu-id="1eacf-140">Microsoft products</span></span>

<span data-ttu-id="1eacf-141">所有 Microsoft Windows 命令列產品現在都可在 GitHub 的開放原始碼存放庫（ [microsoft/terminal](https://github.com/microsoft/terminal)）中使用。</span><span class="sxs-lookup"><span data-stu-id="1eacf-141">All of the Microsoft Windows command-line products are now available on GitHub in an open source repository, [microsoft/terminal](https://github.com/microsoft/terminal).</span></span>

### <a name="windows-console-host"></a><span data-ttu-id="1eacf-142">Windows 主控台主機</span><span class="sxs-lookup"><span data-stu-id="1eacf-142">Windows Console Host</span></span>

<span data-ttu-id="1eacf-143">這是命令列應用程式的傳統 Windows 使用者介面。</span><span class="sxs-lookup"><span data-stu-id="1eacf-143">This is the traditional Windows user-interface for command-line applications.</span></span> <span data-ttu-id="1eacf-144">它會處理從任何附加的命令列應用程式呼叫的所有主控台 API 服務。</span><span class="sxs-lookup"><span data-stu-id="1eacf-144">It handles all console API servicing called from any attached command-line application.</span></span> <span data-ttu-id="1eacf-145">Windows 主控台也會代表這些應用程式，處理 (GUI) 標記法的圖形化使用者介面。</span><span class="sxs-lookup"><span data-stu-id="1eacf-145">Windows Console also handles the graphical user interface (GUI) representation on behalf of all of those applications.</span></span> <span data-ttu-id="1eacf-146">它會在系統目錄中找到 `conhost.exe` ，或 `openconsole.exe` 在其開放原始碼表單中找到。</span><span class="sxs-lookup"><span data-stu-id="1eacf-146">It is found in the system directory as `conhost.exe`, or `openconsole.exe` in its open source form.</span></span> <span data-ttu-id="1eacf-147">它隨附于 Windows 作業系統。</span><span class="sxs-lookup"><span data-stu-id="1eacf-147">It comes with the Windows operating system.</span></span> <span data-ttu-id="1eacf-148">您也可以在從開放原始碼存放庫中建立的其他 Microsoft 產品中找到此資訊，以取得最新的 [pseudoconsole](pseudoconsoles.md) 基礎結構執行。</span><span class="sxs-lookup"><span data-stu-id="1eacf-148">It can also be found in other Microsoft products built from the open source repository for a more up-to-date implementation of the [pseudoconsole](pseudoconsoles.md) infrastructure.</span></span> <span data-ttu-id="1eacf-149">根據上述定義，它會以傳統的伺服器和終端機角色，或透過慣用 _pseudoconsole_ 基礎結構的僅限伺服器角色運作。</span><span class="sxs-lookup"><span data-stu-id="1eacf-149">Per the definitions above, it operates in either a combined server-and-terminal role traditionally or a server-only role through the preferred _pseudoconsole_ infrastructure.</span></span>

### <a name="windows-terminal"></a><span data-ttu-id="1eacf-150">Windows 終端機</span><span class="sxs-lookup"><span data-stu-id="1eacf-150">Windows Terminal</span></span>

<span data-ttu-id="1eacf-151">這是命令列應用程式的新 Windows 介面。</span><span class="sxs-lookup"><span data-stu-id="1eacf-151">This is the new Windows interface for command-line applications.</span></span> <span data-ttu-id="1eacf-152">Windows 終端機可作為使用 [pseudoconsole](pseudoconsoles.md) 來分隔 API 服務與以文字為基礎之應用程式介面間的疑慮的第一方範例，與所有非 Windows 平臺很類似。</span><span class="sxs-lookup"><span data-stu-id="1eacf-152">Windows Terminal serves as a first-party example of using the [pseudoconsole](pseudoconsoles.md) to separate the concerns between API servicing and text-based application interfacing, much like all non-Windows platforms.</span></span>


<span data-ttu-id="1eacf-153">Windows 終端機是適用于 Windows 的旗艦文字模式使用者介面。</span><span class="sxs-lookup"><span data-stu-id="1eacf-153">Windows Terminal is the flagship text-mode user interface for Windows.</span></span> <span data-ttu-id="1eacf-154">它會示範生態系統的功能，並促使 Windows 開發與其他平臺統一。</span><span class="sxs-lookup"><span data-stu-id="1eacf-154">It demonstrates the capabilities of the ecosystem and is driving Windows development toward unifying with other platforms.</span></span> <span data-ttu-id="1eacf-155">Windows 終端機也是如何建立強大且複雜的現代化應用程式，以跨越 Windows Api 和架構的歷程記錄和範圍的範例。</span><span class="sxs-lookup"><span data-stu-id="1eacf-155">Windows Terminal is also an example of how to build a robust and complex modern application that spans the history and gamut of Windows APIs and frameworks.</span></span> <span data-ttu-id="1eacf-156">根據上述定義，此產品會以終端機角色運作。</span><span class="sxs-lookup"><span data-stu-id="1eacf-156">Per the definitions above, this product operates in a terminal role.</span></span>

## <a name="major-historical-milestones"></a><span data-ttu-id="1eacf-157">主要歷程記錄里程碑</span><span class="sxs-lookup"><span data-stu-id="1eacf-157">Major historical milestones</span></span>

<span data-ttu-id="1eacf-158">主控台子系統的主要歷程記錄里程碑會在2014之前分成「執行」，然後在 Windows 10 的時代形成命令列的更新焦點時，移至自2014之後所執行的工作總覽。</span><span class="sxs-lookup"><span data-stu-id="1eacf-158">The major historical milestones for the console subsystem are broken into implementation prior to 2014 and then moves into an overview of work performed since 2014, when the renewed focus on the command-line was formed in the Windows 10 era.</span></span>

### <a name="initial-implementation"></a><span data-ttu-id="1eacf-159">初始執行</span><span class="sxs-lookup"><span data-stu-id="1eacf-159">Initial Implementation</span></span>

<span data-ttu-id="1eacf-160">**\[ 1989 年-1990 年代）** 初始的主控台主機系統已實作為 WINDOWS 作業系統內 DOS 環境的模擬。</span><span class="sxs-lookup"><span data-stu-id="1eacf-160">**\[1989-1990s]** The initial console host system was implemented as an emulation of the DOS environment within the Windows operating system.</span></span> <span data-ttu-id="1eacf-161">其程式碼與 [命令提示](https://docs.microsoft.com/windows-server/administration/windows-commands/cmd)字元纏結併合作， `cmd.exe` 這是該 DOS 環境的標記法。</span><span class="sxs-lookup"><span data-stu-id="1eacf-161">Its code is entangled and cooperative with the [Command Prompt](https://docs.microsoft.com/windows-server/administration/windows-commands/cmd), `cmd.exe`, that is a representation of that DOS environment.</span></span> <span data-ttu-id="1eacf-162">主控台主機系統程式碼會透過命令提示字元解譯器/shell 來共用責任和許可權。</span><span class="sxs-lookup"><span data-stu-id="1eacf-162">The console host system code shares responsibilities and privileges with the Command Prompt interpreter/shell.</span></span> <span data-ttu-id="1eacf-163">它也提供其他命令列公用程式的基底層級服務，以類似 CMD 的方式來執行服務。</span><span class="sxs-lookup"><span data-stu-id="1eacf-163">It also provides a base level of services for other command-line utilities to perform services in a CMD-like manner.</span></span>

### <a name="dbcs-for-cjk"></a><span data-ttu-id="1eacf-164">適用于 CJK 的 DBCS</span><span class="sxs-lookup"><span data-stu-id="1eacf-164">DBCS for CJK</span></span>

<span data-ttu-id="1eacf-165">**\[ 1997-1999 \]** 到目前為止，已引進 [DBCS](https://docs.microsoft.com/windows/win32/intl/double-byte-character-sets)支援 ( 「雙位元組字元集」 ) ，以支援 CJK (中文、日文和韓文) 市場。</span><span class="sxs-lookup"><span data-stu-id="1eacf-165">**\[1997-1999\]** Around this time, [DBCS](https://docs.microsoft.com/windows/win32/intl/double-byte-character-sets) support ("Double-byte character set") is introduced to support CJK (Chinese, Japanese, and Korean) markets.</span></span> <span data-ttu-id="1eacf-166">這項工作會在主控台內提供許多撰寫和讀取方法的分叉，以提供「西方」版本來處理單一位元組字元以及「東部」版本的替代標記法，其中需要兩個位元組才能代表龐大的字元陣列。</span><span class="sxs-lookup"><span data-stu-id="1eacf-166">This effort results in a bifurcation of many of the writing and reading methods inside the console to provide both "western" versions to deal with single-byte characters as well as an alternative representation for "eastern" versions where two bytes are required to represent the vast array of characters.</span></span> <span data-ttu-id="1eacf-167">此分叉包括將主控台環境中的儲存格展開表示為1或2個儲存格，其中1個儲存格的範圍 (高度高於寬度) ，而2個儲存格為寬、全形，或為一般中文、日文和韓文表意文字可以加入的正方形。</span><span class="sxs-lookup"><span data-stu-id="1eacf-167">This bifurcation included the expanding representation of a cell in the console environment to be either 1 or 2 cells wide, where 1 cell is narrow (taller than it is wide) and 2 cells is wide, full-width, or otherwise a square in which typical Chinese, Japanese, and Korean ideographs can be inscribed.</span></span>

### <a name="securityisolation"></a><span data-ttu-id="1eacf-168">安全性/隔離</span><span class="sxs-lookup"><span data-stu-id="1eacf-168">Security/Isolation</span></span>

<span data-ttu-id="1eacf-169">**\[ 2005-2009 \]** 在關鍵系統程式內執行的主控台子系統體驗，將各種 `csrss.exe` 不同存取層級的各種用戶端應用程式連接到單一超級關鍵和特殊許可權的程式，特別危險。</span><span class="sxs-lookup"><span data-stu-id="1eacf-169">**\[2005-2009\]** With the console subsystem experience running inside the critical system process, `csrss.exe`, connecting assorted client applications, at varying access levels, to a single super-critical and privileged process was noticed as particularly dangerous.</span></span> <span data-ttu-id="1eacf-170">在這個時代，主控台子系統已分割成用戶端、驅動程式和伺服器應用程式。</span><span class="sxs-lookup"><span data-stu-id="1eacf-170">In this era, the console subsystem was split into client, driver, and server applications.</span></span> <span data-ttu-id="1eacf-171">每個應用程式都可以在自己的內容中執行，以降低每個應用程式的職責和許可權。</span><span class="sxs-lookup"><span data-stu-id="1eacf-171">Each application could run in their own context, reducing the responsibilities and privilege in each.</span></span> <span data-ttu-id="1eacf-172">這項隔離會提高系統的一般健全狀況，因為主控台子系統中的任何失敗都會不再影響其他重要的進程功能。</span><span class="sxs-lookup"><span data-stu-id="1eacf-172">This isolation increased the general robustness of the system, as any failure in the console subsystem no longer affected other critical process functionality.</span></span>

### <a name="user-experience-improvements"></a><span data-ttu-id="1eacf-173">使用者經驗改進</span><span class="sxs-lookup"><span data-stu-id="1eacf-173">User Experience Improvements</span></span>

<span data-ttu-id="1eacf-174">**\[ 2014-2016 \]** 經過很長一段時間，通常是由組織中的各種小組集中維護主控台子系統，以開發人員為焦點的團隊，並在主控台中提供改進功能。</span><span class="sxs-lookup"><span data-stu-id="1eacf-174">**\[2014-2016\]** After a long time of generally scattered maintenance of the console subsystem by assorted teams across the organization, a new developer-focused team was formed to own and drive improvements in the console.</span></span> <span data-ttu-id="1eacf-175">這段期間的改進包括：直線選取、平滑視窗調整大小、reflowing 文字、複製和貼上、高 DPI 支援，以及專注于 Unicode，包括在 "西歐" 和 "東部" 儲存體與資料流程操作演算法之間進行分割的聚合。</span><span class="sxs-lookup"><span data-stu-id="1eacf-175">Improvements during this time included: line selection, smooth window resizing, reflowing text, copy and paste, high DPI support, and a focus on Unicode, including the convergence of the split between "western" and "eastern" storage and stream manipulation algorithms.</span></span>

### <a name="virtual-terminal-client"></a><span data-ttu-id="1eacf-176">虛擬終端用戶端</span><span class="sxs-lookup"><span data-stu-id="1eacf-176">Virtual Terminal client</span></span>

<span data-ttu-id="1eacf-177">**\[ 2015-2017 \]** 在 [Windows 子系統 Linux 版](https://docs.microsoft.com/windows/wsl/)抵達的情況下，Microsoft 致力於改善 [Windows 上的 Docker](https://docs.microsoft.com/dotnet/architecture/microservices/container-docker-introduction/docker-defined)體驗，並採用 [OpenSSH](https://docs.microsoft.com/windows-server/administration/openssh/openssh_overview)作為頂級命令列遠端執行技術，將 [虛擬終端機序列](console-virtual-terminal-sequences.md)的初始執行導入到主控台主機中。</span><span class="sxs-lookup"><span data-stu-id="1eacf-177">**\[2015-2017\]** With the arrival of the [Windows Subsystem for Linux](https://docs.microsoft.com/windows/wsl/), Microsoft efforts to improve the experience of [Docker on Windows](https://docs.microsoft.com/dotnet/architecture/microservices/container-docker-introduction/docker-defined), and the adoption of [OpenSSH](https://docs.microsoft.com/windows-server/administration/openssh/openssh_overview) as the premier command-line remote execution technology, the initial implementations of [virtual terminal sequences](console-virtual-terminal-sequences.md) were introduced into the console host.</span></span> <span data-ttu-id="1eacf-178">這可讓現有的主控台作為終端機，直接附加到其各自環境中的那些 Linux 原生應用程式，將圖形和文字屬性轉譯為顯示，並以適當的方言傳回使用者輸入。</span><span class="sxs-lookup"><span data-stu-id="1eacf-178">This allowed the existing console to act as the terminal, attached directly to those Linux-native applications in their respective environments, rendering graphical and text attributes to the display and returning user input in the appropriate dialect.</span></span>

### <a name="virtual-terminal-server"></a><span data-ttu-id="1eacf-179">虛擬終端機伺服器</span><span class="sxs-lookup"><span data-stu-id="1eacf-179">Virtual Terminal server</span></span>

<span data-ttu-id="1eacf-180">**\[ 2018 \]** 過去二十年來，收件匣主控台主機的協力廠商替代方案是為了提供額外的開發人員生產力，並在豐富的自訂和索引標籤式介面中強調。</span><span class="sxs-lookup"><span data-stu-id="1eacf-180">**\[2018\]** Over the past twenty years, third-party alternatives for the inbox console host were created to offer additional developer productivity, prominently centered in rich customizations and tabbed interfaces.</span></span> <span data-ttu-id="1eacf-181">這些應用程式仍然需要執行和隱藏主控台主機視窗。</span><span class="sxs-lookup"><span data-stu-id="1eacf-181">These applications still needed to run and hide the console host window.</span></span> <span data-ttu-id="1eacf-182">它們會附加為次要「用戶端」應用程式，以在主要命令列用戶端應用程式運作時，抓取輪詢迴圈中的緩衝區資訊。</span><span class="sxs-lookup"><span data-stu-id="1eacf-182">They attach as a secondary "client" application to scrape out buffer information in polling loops as the primary command-line client application operated.</span></span> <span data-ttu-id="1eacf-183">他們的目標是做為終端機，就像是在其他平臺上，但在沒有可更換終端機的 Windows 環境中。</span><span class="sxs-lookup"><span data-stu-id="1eacf-183">Their goal was to be a terminal, like on other platforms, but in the Windows world where terminals were not replaceable.</span></span>

<span data-ttu-id="1eacf-184">在這段時間內，已引進 [pseudoconsole](pseudoconsoles.md) 基礎結構。</span><span class="sxs-lookup"><span data-stu-id="1eacf-184">In this time period, the [pseudoconsole](pseudoconsoles.md) infrastructure was introduced.</span></span> <span data-ttu-id="1eacf-185">Pseudoconsole 允許任何應用程式在非互動模式中啟動主控台主機，並成為使用者的最終終端介面。</span><span class="sxs-lookup"><span data-stu-id="1eacf-185">Pseudoconsole permits any application to launch the console host in a non-interactive mode and become the final terminal interface for the user.</span></span> <span data-ttu-id="1eacf-186">這項工作的主要限制是 Windows 的持續相容性承諾，可針對不確定的未來服務所有已發佈的 [Windows 主控台 api](console-functions.md) ，同時提供取代的伺服器裝載介面，以符合所有其他平臺上的預期： [虛擬終端機序列](console-virtual-terminal-sequences.md)。</span><span class="sxs-lookup"><span data-stu-id="1eacf-186">The main limitation in this effort was the continued compatibility promise of Windows in servicing all published [Windows Console APIs](console-functions.md) for the indefinite future, while providing a replacement server-hosting interface that matched what is expected on all other platforms: [virtual terminal sequences](console-virtual-terminal-sequences.md).</span></span> <span data-ttu-id="1eacf-187">如此一來，這項工作會執行用戶端階段的鏡像映射： _pseudoconsole_ 專案會在螢幕上顯示的內容，做為委派主機的 _虛擬終端機順序_ ，並將回復轉譯為用戶端應用程式取用的 Windows 格式輸入序列。</span><span class="sxs-lookup"><span data-stu-id="1eacf-187">As such, this effort performed the mirror image of the client phase: the _pseudoconsole_ projects what would be displayed onto the screen as _virtual terminal sequences_ for a delegated host and interprets replies into Windows-format input sequences for client application consumption.</span></span>

## <a name="roadmap-for-the-future"></a><span data-ttu-id="1eacf-188">未來的藍圖</span><span class="sxs-lookup"><span data-stu-id="1eacf-188">Roadmap for the future</span></span>

### <a name="terminal-applications"></a><span data-ttu-id="1eacf-189">終端機應用程式</span><span class="sxs-lookup"><span data-stu-id="1eacf-189">Terminal applications</span></span>

<span data-ttu-id="1eacf-190">**\[ 2019-現在 \]** 這是主控台子系統的開放原始碼時代，著重于新的 Windows 終端機。</span><span class="sxs-lookup"><span data-stu-id="1eacf-190">**\[2019-Now\]** This is the open source era for the console subsystem, focusing on the new Windows Terminal.</span></span> <span data-ttu-id="1eacf-191">在5月2019的 Microsoft Build 會議期間宣佈，Windows 終端機完全在 [microsoft/Terminal](https://github.com/microsoft/terminal)的 GitHub 上。</span><span class="sxs-lookup"><span data-stu-id="1eacf-191">Announced during the Microsoft Build conference in May 2019, Windows Terminal is entirely on GitHub at [microsoft/terminal](https://github.com/microsoft/terminal).</span></span> <span data-ttu-id="1eacf-192">在 [pseudoconsole](pseudoconsoles.md) 的精簡平臺上建立 Windows 終端機應用程式將會是此時代的重點，直接在 Windows 平臺上為開發人員帶來頂級的終端機體驗。</span><span class="sxs-lookup"><span data-stu-id="1eacf-192">Building the Windows Terminal application on top of the refined platform for [pseudoconsole](pseudoconsoles.md) will be the focus of this era, bringing a first-class terminal experience directly to developers on the Windows platform.</span></span>

<span data-ttu-id="1eacf-193">**[Windows 終端機](/terminal/get-started)** 不只是展示平臺，包括 [WinUI](/apps/winui/) 介面技術、 [MSIX](/msix/) 封裝模型，以及 [c + +/WinRT](/uwp/cpp-and-winrt-apis/) 元件架構，也能作為平臺本身的驗證。</span><span class="sxs-lookup"><span data-stu-id="1eacf-193">**[Windows Terminal](/terminal/get-started)** intends not only to showcase the platform — including the [WinUI](/apps/winui/) interface technology, the [MSIX](/msix/) packaging model, and the [C++/WinRT](/uwp/cpp-and-winrt-apis/) component architecture — but also as a validation of the platform itself.</span></span> <span data-ttu-id="1eacf-194">Windows 終端機正在推動 Windows 組織在必要時開啟及發展應用程式平臺，以繼續提升開發人員的生產力。</span><span class="sxs-lookup"><span data-stu-id="1eacf-194">Windows Terminal is driving the Windows organization to open and evolve the app platform as necessary to continue to lift the productivity of developers.</span></span> <span data-ttu-id="1eacf-195">Windows 終端機一組獨特的 power 使用者和開發人員需求，可推動這些市場真正需要的 Windows 平臺需求。</span><span class="sxs-lookup"><span data-stu-id="1eacf-195">The Windows Terminal unique set of power user and developer requirements drive the modern Windows platform requirements for what those markets truly need from Windows.</span></span>

<span data-ttu-id="1eacf-196">在 Windows 作業系統中，這包括從預設位置 [淘汰傳統主控台主機使用者介面](./classic-vs-vt.md) ，以促進 [Windows 終端機](/terminal/get-started)、 [ConPTY](https://devblogs.microsoft.com/commandline/windows-command-line-introducing-the-windows-pseudo-console-conpty/)和 [虛擬終端機序列](console-virtual-terminal-sequences.md)。</span><span class="sxs-lookup"><span data-stu-id="1eacf-196">Inside the Windows operating system, this includes [retiring the classic console host user interface](./classic-vs-vt.md) from its default position in favor of [Windows Terminal](/terminal/get-started), [ConPTY](https://devblogs.microsoft.com/commandline/windows-command-line-introducing-the-windows-pseudo-console-conpty/), and [virtual terminal sequences](console-virtual-terminal-sequences.md).</span></span>

<span data-ttu-id="1eacf-197">最後，這個時代打算提供預設體驗的完整選擇，無論是 Windows 終端機產品或任何替代終端。</span><span class="sxs-lookup"><span data-stu-id="1eacf-197">Lastly, this era intends to offer full choice over the default experience, whether it is the Windows Terminal product or any alternative terminals.</span></span>

### <a name="client-support-library"></a><span data-ttu-id="1eacf-198">用戶端支援程式庫</span><span class="sxs-lookup"><span data-stu-id="1eacf-198">Client support library</span></span>

<span data-ttu-id="1eacf-199">**\[ 未來 \]** 在用戶端提供 [虛擬終端機序列](console-virtual-terminal-sequences.md)的支援和檔，強烈建議 windows 命令列公用程式開發人員先透過傳統 Windows api 使用虛擬終端機序列，以獲得整合生態系統與所有平臺的優點。</span><span class="sxs-lookup"><span data-stu-id="1eacf-199">**\[Future\]** With the support and documentation of [virtual terminal sequences](console-virtual-terminal-sequences.md) on the client side, we strongly encourage Windows command-line utility developers to use virtual terminal sequences first over the classic Windows APIs to gain the benefit of a unified ecosystem with all platforms.</span></span> <span data-ttu-id="1eacf-200">不過，有一個重要的部分是，其他平臺有各式各樣的用戶端協助程式程式庫，可處理像是 [readline](https://tiswww.case.edu/php/chet/readline/rltop.html) 和圖形顯示的輸入，例如 [ncurses](https://invisible-island.net/ncurses/ncurses.html)。</span><span class="sxs-lookup"><span data-stu-id="1eacf-200">However, one significant missing piece is that other platforms have a wide array of client-side helper libraries for handling input like [readline](https://tiswww.case.edu/php/chet/readline/rltop.html) and graphical display like [ncurses](https://invisible-island.net/ncurses/ncurses.html).</span></span> <span data-ttu-id="1eacf-201">這個特定的未來藍圖元素表示探索生態系統所提供的內容，以及如何透過傳統主控台 API，加速在 Windows 命令列應用程式中採用虛擬終端機序列。</span><span class="sxs-lookup"><span data-stu-id="1eacf-201">This particular future road map element represents the exploration of what the ecosystem offers and how we can accelerate the adoption of virtual terminal sequences in Windows command-line applications over the classic Console API.</span></span>

### <a name="sequence-passthrough"></a><span data-ttu-id="1eacf-202">序列傳遞</span><span class="sxs-lookup"><span data-stu-id="1eacf-202">Sequence Passthrough</span></span>

<span data-ttu-id="1eacf-203">**\[ 未來 \]** 虛擬終端用戶端和伺服器的執行組合，可讓用戶端命令列和終端機裝載應用程式完全混合和比對。</span><span class="sxs-lookup"><span data-stu-id="1eacf-203">**\[Future\]** The combination of virtual terminal client and server implementations allows the full mixing and matching of client command-line and terminal hosting applications.</span></span> <span data-ttu-id="1eacf-204">這種組合可以說傳統的 [Windows 主控台 api](console-functions.md) 或 [虛擬終端機序列](console-virtual-terminal-sequences.md)，但是將這項功能轉譯為傳統相容的 windows 方法，然後再回到更通用的虛擬終端機方法，會產生額外的成本。</span><span class="sxs-lookup"><span data-stu-id="1eacf-204">This combination can speak to either the classic [Windows Console APIs](console-functions.md) or [virtual terminal sequences](console-virtual-terminal-sequences.md), however, there is an overhead cost to translating this into the classic compatible Windows method and then back into the more universal virtual terminal method.</span></span>

<span data-ttu-id="1eacf-205">一旦市場充分採用 _虛擬終端機序列_ 和 Windows 上的 utf-8，就可以選擇性地停用主控台主機的轉換/解讀作業。</span><span class="sxs-lookup"><span data-stu-id="1eacf-205">Once the market sufficiently adopts _virtual terminal sequences_ and UTF-8 on Windows, the conversion/interpretation job of the console host can be optionally disabled.</span></span> <span data-ttu-id="1eacf-206">然後，主控台主機會變成簡單的 API 呼叫服務程式，並透過 [pseudoconsole](pseudoconsoles.md)從裝置呼叫轉送至主機應用程式。</span><span class="sxs-lookup"><span data-stu-id="1eacf-206">The console host would then become a simple API call servicer and relay from device calls to the hosting application via the [pseudoconsole](pseudoconsoles.md).</span></span> <span data-ttu-id="1eacf-207">這項變更將可提升效能，並最大化可在用戶端應用程式與終端機之間說出的序列方言。</span><span class="sxs-lookup"><span data-stu-id="1eacf-207">This change will increase performance and maximize the dialect of sequences that can be spoken between the client application and the terminal.</span></span> <span data-ttu-id="1eacf-208">透過這項變更，將會啟用更多的互動性案例，並 *(最後)* 讓 Windows 世界與命令列應用程式空間中所有其他平臺的系列保持一致。</span><span class="sxs-lookup"><span data-stu-id="1eacf-208">Through this change additional interactivity scenarios would be enabled and *(finally)* bring the Windows world into alignment with the family of all other platforms in the command-line application space.</span></span>
