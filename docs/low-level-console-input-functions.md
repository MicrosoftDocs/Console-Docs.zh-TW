---
title: Low-Level 主控台輸入函式
description: 低層級的主控台輸入函式緩衝區包含輸入記錄，其中可能包含鍵盤、滑鼠、緩衝區調整大小、焦點和功能表事件的相關資訊。
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: 主控台, 字元模式應用程式, 命令列應用程式, 終端機應用程式, 主控台 api
MS-HAID:
- '\_win32\_low\_level\_console\_input\_functions'
- base.low\_level\_console\_input\_functions
- consoles.low\_level\_console\_input\_functions
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: 41488614-ca7c-4207-b706-f7776423c7ba
ms.openlocfilehash: c214a90147fae2fbf876746078ce0301af15b7ad
ms.sourcegitcommit: 463975e71920908a6bff9a6a7291ddf3736652d5
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/30/2020
ms.locfileid: "93038546"
---
# <a name="low-level-console-input-functions"></a><span data-ttu-id="26849-104">Low-Level 主控台輸入函式</span><span class="sxs-lookup"><span data-stu-id="26849-104">Low-Level Console Input Functions</span></span>

[!INCLUDE [not-recommended-banner](./includes/not-recommended-banner.md)]

<span data-ttu-id="26849-105">低層級的主控台輸入函式緩衝區包含輸入記錄，其中可能包含鍵盤、滑鼠、緩衝區調整大小、焦點和功能表事件的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="26849-105">A low-level console input functions buffer contains input records that can include information about keyboard, mouse, buffer-resizing, focus, and menu events.</span></span> <span data-ttu-id="26849-106">低層級的函式可直接存取輸入緩衝區，與篩選和處理輸入緩衝區資料的高階函式不同，但會捨棄所有的鍵盤輸入。</span><span class="sxs-lookup"><span data-stu-id="26849-106">The low-level functions provide direct access to the input buffer, unlike the high-level functions that filter and process the input buffer's data, discarding all but keyboard input.</span></span>

<span data-ttu-id="26849-107">有五個低層級的函數可用於存取主控台的輸入緩衝區：</span><span class="sxs-lookup"><span data-stu-id="26849-107">There are five low-level functions for accessing a console's input buffer:</span></span>

- [<span data-ttu-id="26849-108">**ReadConsoleInput**</span><span class="sxs-lookup"><span data-stu-id="26849-108">**ReadConsoleInput**</span></span>](readconsoleinput.md)
- [<span data-ttu-id="26849-109">**PeekConsoleInput**</span><span class="sxs-lookup"><span data-stu-id="26849-109">**PeekConsoleInput**</span></span>](peekconsoleinput.md)
- [<span data-ttu-id="26849-110">**GetNumberOfConsoleInputEvents**</span><span class="sxs-lookup"><span data-stu-id="26849-110">**GetNumberOfConsoleInputEvents**</span></span>](getnumberofconsoleinputevents.md)
- [<span data-ttu-id="26849-111">**WriteConsoleInput**</span><span class="sxs-lookup"><span data-stu-id="26849-111">**WriteConsoleInput**</span></span>](writeconsoleinput.md)
- [<span data-ttu-id="26849-112">**FlushConsoleInputBuffer**</span><span class="sxs-lookup"><span data-stu-id="26849-112">**FlushConsoleInputBuffer**</span></span>](flushconsoleinputbuffer.md)

<span data-ttu-id="26849-113">[**ReadConsoleInput**](readconsoleinput.md)、 [**PeekConsoleInput**](peekconsoleinput.md)和 [**WriteConsoleInput**](writeconsoleinput.md)函數會使用 [**輸入 \_ 記錄**](input-record-str.md)結構來讀取或寫入輸入緩衝區。</span><span class="sxs-lookup"><span data-stu-id="26849-113">The [**ReadConsoleInput**](readconsoleinput.md), [**PeekConsoleInput**](peekconsoleinput.md), and [**WriteConsoleInput**](writeconsoleinput.md) functions use the [**INPUT\_RECORD**](input-record-str.md) structure to read from or write to an input buffer.</span></span>

<span data-ttu-id="26849-114">以下是低層級主控台輸入功能的描述。</span><span class="sxs-lookup"><span data-stu-id="26849-114">Following are descriptions of the low-level console input functions.</span></span>

| <span data-ttu-id="26849-115">函式</span><span class="sxs-lookup"><span data-stu-id="26849-115">Function</span></span> | <span data-ttu-id="26849-116">描述</span><span class="sxs-lookup"><span data-stu-id="26849-116">Description</span></span> |
|-|-|
| [<span data-ttu-id="26849-117">**ReadConsoleInput**</span><span class="sxs-lookup"><span data-stu-id="26849-117">**ReadConsoleInput**</span></span>](readconsoleinput.md) | <span data-ttu-id="26849-118">從輸入緩衝區讀取和移除輸入記錄。</span><span class="sxs-lookup"><span data-stu-id="26849-118">Reads and removes input records from an input buffer.</span></span> <span data-ttu-id="26849-119">除非至少有一個記錄可供讀取，否則函數不會傳回。</span><span class="sxs-lookup"><span data-stu-id="26849-119">The function does not return until at least one record is available to be read.</span></span> <span data-ttu-id="26849-120">然後，所有可用的記錄都會傳送至呼叫進程的緩衝區，直到沒有任何可用的記錄或已讀取指定的記錄數目為止。</span><span class="sxs-lookup"><span data-stu-id="26849-120">Then all available records are transferred to the buffer of the calling process until either no more records are available or the specified number of records has been read.</span></span> <span data-ttu-id="26849-121">未讀取的記錄會保留在輸入緩衝區中，以供下一個讀取作業之用。</span><span class="sxs-lookup"><span data-stu-id="26849-121">Unread records remain in the input buffer for the next read operation.</span></span> <span data-ttu-id="26849-122">此函數會報告已讀取的記錄總數。</span><span class="sxs-lookup"><span data-stu-id="26849-122">The function reports the total number of records that have been read.</span></span> <span data-ttu-id="26849-123">如需使用 [**ReadConsoleInput**](readconsoleinput.md)的範例，請參閱 [讀取輸入緩衝區事件](reading-input-buffer-events.md)。</span><span class="sxs-lookup"><span data-stu-id="26849-123">For an example that uses [**ReadConsoleInput**](readconsoleinput.md), see [Reading Input Buffer Events](reading-input-buffer-events.md).</span></span> |
| [<span data-ttu-id="26849-124">**PeekConsoleInput**</span><span class="sxs-lookup"><span data-stu-id="26849-124">**PeekConsoleInput**</span></span>](peekconsoleinput.md) | <span data-ttu-id="26849-125">讀取，而不移除輸入緩衝區中的暫止輸入記錄。</span><span class="sxs-lookup"><span data-stu-id="26849-125">Reads without removing the pending input records in an input buffer.</span></span> <span data-ttu-id="26849-126">最多可達指定數位的所有可用記錄都會複製到呼叫進程的緩衝區中。</span><span class="sxs-lookup"><span data-stu-id="26849-126">All available records up to the specified number are copied into the buffer of the calling process.</span></span> <span data-ttu-id="26849-127">如果沒有可用的記錄，函數會立即傳回。</span><span class="sxs-lookup"><span data-stu-id="26849-127">If no records are available, the function returns immediately.</span></span> <span data-ttu-id="26849-128">此函數會報告已讀取的記錄總數。</span><span class="sxs-lookup"><span data-stu-id="26849-128">The function reports the total number of records that have been read.</span></span> |
| [<span data-ttu-id="26849-129">**GetNumberOfConsoleInputEvents**</span><span class="sxs-lookup"><span data-stu-id="26849-129">**GetNumberOfConsoleInputEvents**</span></span>](getnumberofconsoleinputevents.md) | <span data-ttu-id="26849-130">判斷輸入緩衝區中未讀取的輸入記錄數目。</span><span class="sxs-lookup"><span data-stu-id="26849-130">Determines the number of unread input records in an input buffer.</span></span> |
| [<span data-ttu-id="26849-131">**WriteConsoleInput**</span><span class="sxs-lookup"><span data-stu-id="26849-131">**WriteConsoleInput**</span></span>](writeconsoleinput.md) | <span data-ttu-id="26849-132">將輸入記錄放入緩衝區中任何暫止記錄後方的輸入緩衝區。</span><span class="sxs-lookup"><span data-stu-id="26849-132">Places input records into the input buffer behind any pending records in the buffer.</span></span> <span data-ttu-id="26849-133">視需要，輸入緩衝區會動態成長，以保存所寫入的記錄數目。</span><span class="sxs-lookup"><span data-stu-id="26849-133">The input buffer grows dynamically, if necessary, to hold as many records as are written.</span></span> <span data-ttu-id="26849-134">若要使用此函式，指定的輸入緩衝區控制碼必須有一般 \_ 寫入存取權限。</span><span class="sxs-lookup"><span data-stu-id="26849-134">To use this function, the specified input buffer handle must have the GENERIC\_WRITE access right.</span></span> |
| [<span data-ttu-id="26849-135">**FlushConsoleInputBuffer**</span><span class="sxs-lookup"><span data-stu-id="26849-135">**FlushConsoleInputBuffer**</span></span>](flushconsoleinputbuffer.md) | <span data-ttu-id="26849-136">捨棄輸入緩衝區中的所有未讀取事件。</span><span class="sxs-lookup"><span data-stu-id="26849-136">Discards all unread events in the input buffer.</span></span> <span data-ttu-id="26849-137">若要使用此函式，指定的輸入緩衝區控制碼必須有一般 \_ 寫入存取權限。</span><span class="sxs-lookup"><span data-stu-id="26849-137">To use this function, the specified input buffer handle must have the GENERIC\_WRITE access right.</span></span> |

<span data-ttu-id="26849-138">應用程式進程的執行緒可以執行等候作業，等候輸入緩衝區中有可用的輸入。</span><span class="sxs-lookup"><span data-stu-id="26849-138">A thread of an application's process can perform a wait operation to wait for input to be available in an input buffer.</span></span> <span data-ttu-id="26849-139">若要起始等候作業，請在對任何 [等候](https://msdn.microsoft.com/library/windows/desktop/ms687069)函式的呼叫中指定輸入緩衝區的控制碼。</span><span class="sxs-lookup"><span data-stu-id="26849-139">To initiate a wait operation, specify a handle to the input buffer in a call to any of the [wait functions](https://msdn.microsoft.com/library/windows/desktop/ms687069).</span></span> <span data-ttu-id="26849-140">當一個或多個物件的狀態為已發出信號時，這些函式可能會傳回。</span><span class="sxs-lookup"><span data-stu-id="26849-140">These functions can return when the state of one or more objects is signaled.</span></span> <span data-ttu-id="26849-141">當輸入緩衝區中有未讀取的記錄時，主控台輸入控制碼的狀態就會變成發出信號。</span><span class="sxs-lookup"><span data-stu-id="26849-141">The state of a console input handle becomes signaled when there are unread records in its input buffer.</span></span> <span data-ttu-id="26849-142">當輸入緩衝區變成空白時，狀態會重設為非信號。</span><span class="sxs-lookup"><span data-stu-id="26849-142">The state is reset to non-signaled when the input buffer becomes empty.</span></span> <span data-ttu-id="26849-143">如果沒有可用的輸入，呼叫執行緒會進入有效率的等候狀態，而在等候等候作業的條件時，耗用非常少的處理器時間。</span><span class="sxs-lookup"><span data-stu-id="26849-143">If there is no input available, the calling thread enters an efficient wait state, consuming very little processor time while waiting for the conditions of the wait operation to be satisfied.</span></span>
