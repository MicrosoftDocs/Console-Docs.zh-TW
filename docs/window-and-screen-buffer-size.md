---
title: 視窗和螢幕緩衝區大小
description: 螢幕緩衝區的大小是根據字元儲存格以座標方格表示。
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: 主控台, 字元模式應用程式, 命令列應用程式, 終端機應用程式, 主控台 api
MS-HAID:
- '\_win32\_window\_and\_screen\_buffer\_size'
- base.window\_and\_screen\_buffer\_size
- consoles.window\_and\_screen\_buffer\_size
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: 55246039-31eb-41ca-ad8e-d314cb508644
ms.openlocfilehash: 91fed765b76ebfb8b9dde318d8f76eff9a72d862
ms.sourcegitcommit: 463975e71920908a6bff9a6a7291ddf3736652d5
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/30/2020
ms.locfileid: "93037106"
---
# <a name="window-and-screen-buffer-size"></a><span data-ttu-id="d6f81-104">視窗和螢幕緩衝區大小</span><span class="sxs-lookup"><span data-stu-id="d6f81-104">Window and Screen Buffer Size</span></span>

<span data-ttu-id="d6f81-105">螢幕緩衝區的大小是根據字元儲存格以座標方格表示。</span><span class="sxs-lookup"><span data-stu-id="d6f81-105">The size of a screen buffer is expressed in terms of a coordinate grid based on character cells.</span></span> <span data-ttu-id="d6f81-106">寬度是每個資料列中的字元資料格數目，而高度是資料列的數目。</span><span class="sxs-lookup"><span data-stu-id="d6f81-106">The width is the number of character cells in each row, and the height is the number of rows.</span></span> <span data-ttu-id="d6f81-107">與每個螢幕緩衝區相關聯的視窗，會決定主控台視窗中顯示的主控台螢幕緩衝區矩形部分的大小和位置。</span><span class="sxs-lookup"><span data-stu-id="d6f81-107">Associated with each screen buffer is a window that determines the size and location of the rectangular portion of the console screen buffer displayed in the console window.</span></span> <span data-ttu-id="d6f81-108">螢幕緩衝區的視窗是藉由指定視窗矩形左上角和右下角儲存格的字元儲存格座標來定義。</span><span class="sxs-lookup"><span data-stu-id="d6f81-108">A screen buffer's window is defined by specifying the character-cell coordinates of the upper left and lower right cells of the window's rectangle.</span></span>

> [!NOTE]
> <span data-ttu-id="d6f81-109">在 **[虛擬終端機序列](console-virtual-terminal-sequences.md)** 世界中，視窗的大小和螢幕緩衝區的大小會固定為相同的值。</span><span class="sxs-lookup"><span data-stu-id="d6f81-109">In the **[virtual terminal sequences](console-virtual-terminal-sequences.md)** world, the size of the window and the size of the screen buffer are fixed to the same value.</span></span> <span data-ttu-id="d6f81-110">終端機會處理任何回卷區域，該區域相當於螢幕緩衝區大小大於其視窗大小的主控台。</span><span class="sxs-lookup"><span data-stu-id="d6f81-110">The terminal handles any scrollback region that would be the equivalent of a console with a screen buffer size larger than its window size.</span></span> <span data-ttu-id="d6f81-111">該內容屬於終端機，通常不再是可定址區域的一部分。</span><span class="sxs-lookup"><span data-stu-id="d6f81-111">That content belongs to the terminal and is generally no longer a part of the addressable area.</span></span> <span data-ttu-id="d6f81-112">如需詳細資訊，請參閱比較 **[傳統主控台函式與虛擬終端機序列](classic-vs-vt.md)** 。</span><span class="sxs-lookup"><span data-stu-id="d6f81-112">For more information, please see our comparison of the **[classic console functions versus virtual terminal sequences](classic-vs-vt.md)** .</span></span>

<span data-ttu-id="d6f81-113">螢幕緩衝區可以是任何大小，只受限於可用的記憶體。</span><span class="sxs-lookup"><span data-stu-id="d6f81-113">A screen buffer can be any size, limited only by available memory.</span></span> <span data-ttu-id="d6f81-114">螢幕緩衝區視窗的大小不能超過主控台螢幕緩衝區的對應維度或可在螢幕上容納的最大視窗大小（根據目前的字型大小 (由使用者) 獨佔控制）。</span><span class="sxs-lookup"><span data-stu-id="d6f81-114">The dimensions of a screen buffer's window cannot exceed the corresponding dimensions of either the console screen buffer or the maximum window that can fit on the screen based on the current font size (controlled exclusively by the user).</span></span>

<span data-ttu-id="d6f81-115">[**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md)函式會傳回關於螢幕緩衝區和其視窗的下列資訊：</span><span class="sxs-lookup"><span data-stu-id="d6f81-115">The [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) function returns the following information about a screen buffer and its window:</span></span>

- <span data-ttu-id="d6f81-116">目前的主控台螢幕緩衝區大小</span><span class="sxs-lookup"><span data-stu-id="d6f81-116">The current size of the console screen buffer</span></span>
- <span data-ttu-id="d6f81-117">視窗的目前位置</span><span class="sxs-lookup"><span data-stu-id="d6f81-117">The current location of the window</span></span>
- <span data-ttu-id="d6f81-118">指定目前螢幕緩衝區大小、目前的字型大小和螢幕大小的視窗大小上限</span><span class="sxs-lookup"><span data-stu-id="d6f81-118">The maximum size of the window given the current screen buffer size, the current font size, and the screen size</span></span>

<span data-ttu-id="d6f81-119">[**GetLargestConsoleWindowSize**](getlargestconsolewindowsize.md)函式會根據目前的字型和螢幕大小，傳回主控台視窗的大小上限。</span><span class="sxs-lookup"><span data-stu-id="d6f81-119">The [**GetLargestConsoleWindowSize**](getlargestconsolewindowsize.md) function returns the maximum size of a console's window based on the current font and screen sizes.</span></span> <span data-ttu-id="d6f81-120">這個大小與 [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) 所傳回的最大視窗大小不同，因為會忽略主控台螢幕緩衝區大小。</span><span class="sxs-lookup"><span data-stu-id="d6f81-120">This size differs from the maximum window size returned by [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) in that the console screen buffer size is ignored.</span></span>

<span data-ttu-id="d6f81-121">若要變更螢幕緩衝區大小，請使用 [**SetConsoleScreenBufferSize**](setconsolescreenbuffersize.md) 函數。</span><span class="sxs-lookup"><span data-stu-id="d6f81-121">To change a screen buffer's size, use the [**SetConsoleScreenBufferSize**](setconsolescreenbuffersize.md) function.</span></span> <span data-ttu-id="d6f81-122">如果指定大小的任一維度小於主控台視窗的對應維度，則此函式會失敗。</span><span class="sxs-lookup"><span data-stu-id="d6f81-122">This function fails if either dimension of the specified size is less than the corresponding dimension of the console's window.</span></span>

<span data-ttu-id="d6f81-123">若要變更螢幕緩衝區視窗的大小或位置，請使用 [**SetConsoleWindowInfo**](setconsolewindowinfo.md) 函數。</span><span class="sxs-lookup"><span data-stu-id="d6f81-123">To change the size or location of a screen buffer's window, use the [**SetConsoleWindowInfo**](setconsolewindowinfo.md) function.</span></span> <span data-ttu-id="d6f81-124">如果指定的視窗邊角座標超過主控台螢幕緩衝區或畫面的限制，則此函式會失敗。</span><span class="sxs-lookup"><span data-stu-id="d6f81-124">This function fails if the specified window-corner coordinates exceed the limits of the console screen buffer or the screen.</span></span> <span data-ttu-id="d6f81-125">變更作用中螢幕緩衝區的視窗大小，會變更顯示在畫面上的主控台視窗大小。</span><span class="sxs-lookup"><span data-stu-id="d6f81-125">Changing the window size of the active screen buffer changes the size of the console window displayed on the screen.</span></span>

<span data-ttu-id="d6f81-126">進程可以變更其主控台的輸入模式，以啟用視窗輸入，讓程式能夠在使用者變更控制台螢幕緩衝區大小時接收輸入。</span><span class="sxs-lookup"><span data-stu-id="d6f81-126">A process can change its console's input mode to enable window input so that the process is able to receive input when the user changes the console screen buffer size.</span></span> <span data-ttu-id="d6f81-127">如果應用程式啟用視窗輸入，就可以在啟動時使用 [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) 來取得視窗和螢幕緩衝區大小。</span><span class="sxs-lookup"><span data-stu-id="d6f81-127">If an application enables window input, it can use [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) to retrieve window and screen buffer size at startup.</span></span> <span data-ttu-id="d6f81-128">然後，您可以使用此資訊來決定資料在視窗中的顯示方式。</span><span class="sxs-lookup"><span data-stu-id="d6f81-128">This information can then be used to determine the way data is displayed in the window.</span></span> <span data-ttu-id="d6f81-129">如果使用者變更控制台螢幕緩衝區大小，則應用程式可以藉由變更資料顯示方式來回應。</span><span class="sxs-lookup"><span data-stu-id="d6f81-129">If the user changes the console screen buffer size, the application can respond by changing the way data is displayed.</span></span> <span data-ttu-id="d6f81-130">例如，如果每個資料列的字元數變更，應用程式可以調整文字在行尾換行的方式。</span><span class="sxs-lookup"><span data-stu-id="d6f81-130">For example, an application can adjust the way text wraps at the end of the line if the number of characters per row changes.</span></span> <span data-ttu-id="d6f81-131">如果應用程式未啟用視窗輸入，則必須使用繼承的視窗和螢幕緩衝區大小，或在啟動期間將它們設定為所需的大小，並在結束時還原繼承的大小。</span><span class="sxs-lookup"><span data-stu-id="d6f81-131">If an application does not enable window input, it must either use the inherited window and screen buffer sizes, or set them to the desired size during startup and restore the inherited sizes at exit.</span></span> <span data-ttu-id="d6f81-132">如需有關視窗輸入模式的詳細資訊，請參閱 [低層級主控台模式](low-level-console-modes.md)。</span><span class="sxs-lookup"><span data-stu-id="d6f81-132">For additional information about window input mode, see [Low-Level Console Modes](low-level-console-modes.md).</span></span>
